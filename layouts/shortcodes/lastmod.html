{{- $path := .Get "path" -}}
{{- $lang := .Page.Language.Lang -}}

{{- $day := "" -}}
{{- $monthName := "" -}}
{{- $year := "" -}}

{{- if $path -}}
  {{- with site.Data.pdf_lastmod -}}
    {{- with index . "pdf_lastmod" $path -}}
      {{- $splitDate := split . "-" -}}
      {{- $year = index $splitDate 0 -}}
      {{- $monthNum := index $splitDate 1 -}}
      {{- $day = index $splitDate 2 -}}

      {{- $monthName = index (dict 
        "01" "January" "02" "February" "03" "March" "04" "April" 
        "05" "May" "06" "June" "07" "July" "08" "August" 
        "09" "September" "10" "October" "11" "November" "12" "December") $monthNum -}}
    {{- end -}}
  {{- end -}}
{{- else if .Page.Lastmod -}}
  {{- $modTime := .Page.Lastmod -}}
  {{- $monthName = $modTime.Format "January" -}}
  {{- $day = $modTime.Format "2" -}}
  {{- $year = $modTime.Format "2006" -}}
{{- end -}}

{{- if and $day $year $monthName -}}
  {{- $localizedMonth := index (dict
      "en" (dict "January" "January" "February" "February" "March" "March"
                  "April" "April" "May" "May" "June" "June" "July" "July"
                  "August" "August" "September" "September" "October" "October"
                  "November" "November" "December" "December")
      "ru" (dict "January" "января" "February" "февраля" "March" "марта"
                  "April" "апреля" "May" "мая" "June" "июня" "July" "июля"
                  "August" "августа" "September" "сентября" "October" "октября"
                  "November" "ноября" "December" "декабря")) $lang $monthName -}}

  {{- if eq $lang "ru" -}}
    <span class="lastmod">({{ i18n "last_updated" }}: {{ $day }} {{ $localizedMonth }} {{ $year }})</span>
  {{- else -}}
    <span class="lastmod">({{ i18n "last_updated" }}: {{ $localizedMonth }} {{ $day }}, {{ $year }})</span>
  {{- end -}}
{{- end -}}